{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8 col-sm-12">
      <h4  class="text-center rubrics mt-3"><i class="fas fa-search big-icon"></i>Search</h4>

      <form id="search-form" class="d-flex form-inline mt-3" method="GET" action="{% url 'search_user' %}">
        {% csrf_token %}
        <input id="search-input" class="form-control mr-sm-2" type="search" placeholder="Search by username" aria-label="Search" name="query" value="{{ request.GET.query }}">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      </form>
        <div class="result-card col-md-12 border shadow p-2 not-visible" id="result-box"></div>

    </div>
  </div>
</div>


<div class="container">
    <div class="row justify-content-center mt-5">
        <div class="col-md-8 col-sm-12">
            <h4  class="text-center rubrics"><i class="fas fa-search big-icon"></i>Search Result</h4>
            {% if messages %}
            <div class="row justify-content-center pt-3">
              <div class="col-md-4 col-sm-8">
                {% for message in messages %}
                <div class="alert alert-color fade show" role="alert" id="msg-box">{{message}}
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endfor %}
            </div>
            </div>
            {% endif %}
        </div>
    </div>
  </div>

<div class="container">
    {% for result in results %}
    <div class="row justify-content-center mt-3">
        <div class="col-md-8 col-sm-12 ">
              
                <p class="search-result">
                    {% if "placeholder" in result.user.profile.picture.url %}
                    <img width="50" heigh="50" class="rounded-circle" src="{% static 'image/default_profile.png' %}"/>
                    {% else %}
                    <img height="50" width="50" class="rounded-circle" src="{{ result.user.profile.picture.url }}" />
                    {% endif %}
                    <a href="{% url 'search_user' result.pk %}">{{ result.user }}</a>
                </p>
        </div>
    </div>
    {% endfor %}

      
 
       
{% endblock %}